<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSM - 主控制台</title>
    <link rel="stylesheet" href="https://unpkg.com/layui@2.8.18/dist/css/layui.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        .layui-layout-admin .layui-header {
            background-color: #ffffff;
            border-bottom: 1px solid #e6e6e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .layui-layout-admin .layui-side {
            background: #ffffff;
            border-right: 1px solid #e6e6e6;
            box-shadow: 2px 0 8px rgba(0,0,0,0.05);
        }
        
        .layui-layout-admin .layui-body {
            background-color: #f5f5f5;
        }
        
        .header-logo {
            float: left;
            width: 200px;
            line-height: 60px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #333333;
        }
        
        .header-user {
            float: right;
            margin-right: 20px;
            line-height: 60px;
        }
        
        .layui-nav-tree .layui-nav-item a {
            color: #666666;
            font-weight: 500;
            transition: all 0.3s ease;
            border-radius: 6px;
            margin: 2px 8px;
        }
        
        .layui-nav-tree .layui-nav-item a:hover {
            background: #f8f9fa;
            color: #333333;
            transform: translateX(3px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }
        
        .layui-nav-tree .layui-this {
            background: #f0f0f0;
            border-radius: 6px;
            margin: 2px 8px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .layui-nav-tree .layui-this > a {
            color: #333333;
            font-weight: 600;
        }
        
        .layui-nav-tree .layui-nav-child dd a {
            color: #888888;
            padding-left: 45px;
            font-size: 13px;
        }
        
        .layui-nav-tree .layui-nav-child dd a:hover {
            background-color: #f5f5f5;
            color: #555555;
        }
        
        .content-wrapper {
            padding: 20px;
        }
        
        .stats-card {
            background: #ffffff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .tech-item {
            background: #ffffff;
            color: #333333;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e6e6e6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .tech-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #495057;
        }
        
        .tech-desc {
            font-size: 14px;
            color: #6c757d;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .breadcrumb {
            background: #ffffff;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="layui-layout-body">
    <div class="layui-layout layui-layout-admin">
        <!-- 引入顶部导航栏 -->
        <th:block th:include="common/header :: header"></th:block>
        
        <!-- 侧边栏 -->
        <th:block th:include="common/sidebar :: sidebar"></th:block>
        
        <!-- 主体内容 -->
        <div class="layui-body">
            <!-- 面包屑导航 -->
            <div class="breadcrumb">
                <span class="layui-breadcrumb" lay-separator=">">
                    <a href="/index">home</a>
                </span>
            </div>
            
            <div class="content-wrapper">
                <!-- 技术栈展示 -->
                <div class="stats-grid">
                    <div class="tech-item">
                        <div class="tech-name">Spring Boot</div>
                        <div class="tech-desc">微服务框架</div>
                    </div>
                    <div class="tech-item">
                        <div class="tech-name">Spring Cloud</div>
                        <div class="tech-desc">分布式系统</div>
                    </div>
                    <div class="tech-item">
                        <div class="tech-name">MyBatis</div>
                        <div class="tech-desc">持久层框架</div>
                    </div>
                    <div class="tech-item">
                        <div class="tech-name">MySQL</div>
                        <div class="tech-desc">关系型数据库</div>
                    </div>
                </div>
                
                <!-- 系统信息 -->
                <div class="stats-card">
                    <h3 style="margin-top: 0; color: #333333;">系统信息</h3>
                    <div class="layui-row layui-col-space20">
                        <div class="layui-col-md6">
                            <p><strong>系统名称：</strong>TSM</p>
                            <p><strong>系统版本：</strong>v1.0.0</p>
                            <p><strong>技术栈：</strong>Spring Boot + Spring Cloud + MyBatis + MySQL</p>
                        </div>
                        <div class="layui-col-md6">
                            <p><strong>服务器时间：</strong><span id="serverTime"></span></p>
                            <p><strong>运行环境：</strong>Java 8 + Maven 3.8+</p>
                            <p><strong>数据库：</strong>MySQL 8.0</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 底部 -->
        <div class="layui-footer" style="text-align: center; color: #999999;">
            © 2024 TSM
        </div>
    </div>
    
    <script src="https://unpkg.com/layui@2.8.18/dist/layui.js"></script>
    <script>
        layui.use(['element', 'layer'], function(){
            var element = layui.element;
            var layer = layui.layer;
            
            // 检查登录状态
            var token = localStorage.getItem('token');
            var userInfo = localStorage.getItem('userInfo');
            
            if (!token) {
                window.location.href = '/login';
                return;
            }
            
            // 显示用户信息
            if (userInfo) {
                var user = JSON.parse(userInfo);
                document.getElementById('username').textContent = user.realName || user.username;
            }
            
            // 更新服务器时间
            updateServerTime();
            setInterval(updateServerTime, 1000);
        });
        

        
        // 更新服务器时间
        function updateServerTime() {
            var now = new Date();
            var timeString = now.getFullYear() + '-' + 
                            String(now.getMonth() + 1).padStart(2, '0') + '-' + 
                            String(now.getDate()).padStart(2, '0') + ' ' + 
                            String(now.getHours()).padStart(2, '0') + ':' + 
                            String(now.getMinutes()).padStart(2, '0') + ':' + 
                            String(now.getSeconds()).padStart(2, '0');
            document.getElementById('serverTime').textContent = timeString;
        }
        
        // 退出登录
        function logout() {
            layui.layer.confirm('确定要退出登录吗？', {icon: 3, title:'提示'}, function(index){
                localStorage.removeItem('token');
                localStorage.removeItem('userInfo');
                window.location.href = '/login';
                layui.layer.close(index);
            });
        }
    </script>
</body>
</html>