server:
  port: 8081

spring:
  application:
    name: tsm-auth
  cloud:
    nacos:
      config:
        import-check:
          enabled: false
  
  # 数据库配置
  datasource:
    url: jdbc:mysql://47.109.155.118:3309/TSM?useUnicode=true&characterEncoding=utf8&serverTimezone=GMT%2B8&useSSL=false
    username: root
    password: Root@@__135230
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 60000
      idle-timeout: 600000
      max-lifetime: 1800000
  
  # Redis配置
  redis:
    host: 47.109.155.118
    port: 6379
    password: 
    database: 0
    timeout: 5000ms
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
        max-wait: -1ms
  
  # 暂时禁用Nacos配置
  # cloud:
  #   nacos:
  #     discovery:
  #       server-addr: 127.0.0.1:8848
  #       namespace: public
  #       group: DEFAULT_GROUP
  #     config:
  #       server-addr: 127.0.0.1:8848
  #       namespace: public
  #       group: DEFAULT_GROUP
  #       file-extension: yml

# MyBatis配置 - 暂时完全禁用
# mybatis-plus:
#   configuration:
#     map-underscore-to-camel-case: true
#     log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
#   global-config:
#     db-config:
#       id-type: auto
#       logic-delete-field: deleted
#       logic-delete-value: 1
#       logic-not-delete-value: 0
#   # mapper-locations: classpath*:/mapper/**/*.xml  # 暂时禁用mapper扫描

# 日志配置
logging:
  level:
    com.tsm.auth: debug
    org.springframework.security: debug
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n"

# JWT配置
jwt:
  secret: TSM_SECRET_KEY_2024
  expiration: 86400000  # 24小时
  header: Authorization
  prefix: Bearer

# 验证码配置
captcha:
  enabled: true
  expire: 300  # 5分钟过期
  length: 4
  width: 120
  height: 40