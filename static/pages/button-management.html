<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>按钮权限管理</title>
    <style>
        body {
            padding: 20px;
            background: #f8f9fa;
        }
        
        .page-header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .page-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin: 0;
        }
        
        .page-description {
            color: #666;
            margin-top: 8px;
            font-size: 14px;
        }
        
        .search-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .content-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .toolbar {
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .toolbar-left {
            display: flex;
            gap: 10px;
        }
        
        .toolbar-right {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .table-container {
            padding: 0 20px 20px;
        }
        
        .layui-table {
            margin: 0;
        }
        
        .layui-table th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-normal {
            background: #d4edda;
            color: #155724;
        }
        
        .status-disabled {
            background: #f8d7da;
            color: #721c24;
        }
        
        .btn-group {
            display: flex;
            gap: 5px;
        }
        
        .btn-sm {
            padding: 4px 8px;
            font-size: 12px;
            border-radius: 4px;
        }
        
        .btn-primary {
            background: #667eea;
            border-color: #667eea;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }
        
        .btn-warning {
            background: #ffc107;
            border-color: #ffc107;
            color: #212529;
        }
        
        .btn-danger {
            background: #dc3545;
            border-color: #dc3545;
            color: white;
        }
        
        .btn-info {
            background: #17a2b8;
            border-color: #17a2b8;
            color: white;
        }
        
        .permission-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }
        
        .permission-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            border: 1px solid #bbdefb;
        }
        
        .search-form .layui-form-item {
            margin-bottom: 15px;
        }
        
        .search-form .layui-input-inline {
            width: 200px;
        }
        
        .stats-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex: 1;
            text-align: center;
        }
        
        .stat-number {
            font-size: 28px;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
        }
        
        .button-icon {
            width: 16px;
            height: 16px;
            margin-right: 4px;
            vertical-align: middle;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 16px;
            display: block;
        }
    </style>
</head>
<body>
    <div class="page-header">
        <h1 class="page-title">按钮权限管理</h1>
        <p class="page-description">管理系统中的按钮级权限，控制用户对特定操作的访问权限</p>
    </div>
    
    <!-- 统计卡片 -->
    <div class="stats-container">
        <div class="stat-card">
            <div class="stat-number" id="totalButtons">0</div>
            <div class="stat-label">总按钮数</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="enabledButtons">0</div>
            <div class="stat-label">启用按钮</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="disabledButtons">0</div>
            <div class="stat-label">禁用按钮</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="assignedButtons">0</div>
            <div class="stat-label">已分配按钮</div>
        </div>
    </div>
    
    <!-- 搜索区域 -->
    <div class="search-container">
        <form class="layui-form search-form" lay-filter="searchForm">
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">按钮名称：</label>
                    <div class="layui-input-inline">
                        <input type="text" name="buttonName" placeholder="请输入按钮名称" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">按钮编码：</label>
                    <div class="layui-input-inline">
                        <input type="text" name="buttonCode" placeholder="请输入按钮编码" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">状态：</label>
                    <div class="layui-input-inline">
                        <select name="status">
                            <option value="">全部状态</option>
                            <option value="1">正常</option>
                            <option value="0">禁用</option>
                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">关联权限：</label>
                    <div class="layui-input-inline">
                        <select name="permissionId">
                            <option value="">全部权限</option>
                            <option value="11">用户管理</option>
                            <option value="12">角色管理</option>
                            <option value="13">权限管理</option>
                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <button type="submit" class="layui-btn" lay-submit lay-filter="search">
                        <i class="layui-icon layui-icon-search"></i> 搜索
                    </button>
                    <button type="reset" class="layui-btn layui-btn-primary">
                        <i class="layui-icon layui-icon-refresh"></i> 重置
                    </button>
                </div>
            </div>
        </form>
    </div>
    
    <!-- 内容区域 -->
    <div class="content-container">
        <div class="toolbar">
            <div class="toolbar-left">
                <button class="layui-btn" id="addButton">
                    <i class="layui-icon layui-icon-add-1"></i> 添加按钮
                </button>
                <button class="layui-btn layui-btn-danger" id="batchDeleteButton">
                    <i class="layui-icon layui-icon-delete"></i> 批量删除
                </button>
                <button class="layui-btn layui-btn-normal" id="exportButton">
                    <i class="layui-icon layui-icon-export"></i> 导出
                </button>
            </div>
            <div class="toolbar-right">
                <button class="layui-btn layui-btn-primary layui-btn-sm" id="refreshButton">
                    <i class="layui-icon layui-icon-refresh-3"></i> 刷新
                </button>
            </div>
        </div>
        
        <div class="table-container">
            <table class="layui-table" lay-filter="buttonTable">
                <thead>
                    <tr>
                        <th lay-data="{type:'checkbox', fixed: 'left'}"></th>
                        <th lay-data="{field:'id', width:80, sort: true}">ID</th>
                        <th lay-data="{field:'buttonName', width:150}">按钮名称</th>
                        <th lay-data="{field:'buttonCode', width:180}">按钮编码</th>
                        <th lay-data="{field:'buttonIcon', width:100, align:'center'}">图标</th>
                        <th lay-data="{field:'permissions', width:200}">关联权限</th>
                        <th lay-data="{field:'description', width:200}">描述</th>
                        <th lay-data="{field:'sort', width:80, sort: true, align:'center'}">排序</th>
                        <th lay-data="{field:'status', width:100, align:'center'}">状态</th>
                        <th lay-data="{field:'createTime', width:160, sort: true}">创建时间</th>
                        <th lay-data="{field:'operate', width:200, fixed: 'right', align:'center'}">操作</th>
                    </tr>
                </thead>
                <tbody id="buttonTableBody">
                    <!-- 数据将通过JavaScript动态生成 -->
                </tbody>
            </table>
            
            <!-- 空状态 -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <i class="layui-icon layui-icon-face-cry"></i>
                <div>暂无按钮权限数据</div>
            </div>
        </div>
    </div>
    
    <!-- 分页 -->
    <div id="pagination"></div>
    
    <script>
        layui.use(['table', 'form', 'layer', 'laypage'], function(){
            var table = layui.table;
            var form = layui.form;
            var layer = layui.layer;
            var laypage = layui.laypage;
            
            // 模拟按钮权限数据
            var buttonData = [
                {
                    id: 1,
                    buttonName: '添加用户',
                    buttonCode: 'user:add',
                    buttonIcon: 'layui-icon-add-1',
                    permissions: [11],
                    permissionNames: ['用户管理'],
                    description: '添加新用户的按钮权限',
                    sort: 1,
                    status: 1,
                    createTime: '2024-01-15 10:30:00',
                    updateTime: '2024-01-15 10:30:00'
                },
                {
                    id: 2,
                    buttonName: '编辑用户',
                    buttonCode: 'user:edit',
                    buttonIcon: 'layui-icon-edit',
                    permissions: [11],
                    permissionNames: ['用户管理'],
                    description: '编辑用户信息的按钮权限',
                    sort: 2,
                    status: 1,
                    createTime: '2024-01-15 10:31:00',
                    updateTime: '2024-01-15 10:31:00'
                },
                {
                    id: 3,
                    buttonName: '删除用户',
                    buttonCode: 'user:delete',
                    buttonIcon: 'layui-icon-delete',
                    permissions: [11],
                    permissionNames: ['用户管理'],
                    description: '删除用户的按钮权限',
                    sort: 3,
                    status: 1,
                    createTime: '2024-01-15 10:32:00',
                    updateTime: '2024-01-15 10:32:00'
                },
                {
                    id: 4,
                    buttonName: '分配角色',
                    buttonCode: 'user:assign:role',
                    buttonIcon: 'layui-icon-group',
                    permissions: [11, 12],
                    permissionNames: ['用户管理', '角色管理'],
                    description: '为用户分配角色的按钮权限',
                    sort: 4,
                    status: 1,
                    createTime: '2024-01-15 10:33:00',
                    updateTime: '2024-01-15 10:33:00'
                },
                {
                    id: 5,
                    buttonName: '添加角色',
                    buttonCode: 'role:add',
                    buttonIcon: 'layui-icon-add-1',
                    permissions: [12],
                    permissionNames: ['角色管理'],
                    description: '添加新角色的按钮权限',
                    sort: 1,
                    status: 1,
                    createTime: '2024-01-15 10:34:00',
                    updateTime: '2024-01-15 10:34:00'
                },
                {
                    id: 6,
                    buttonName: '分配权限',
                    buttonCode: 'role:assign:permission',
                    buttonIcon: 'layui-icon-vercode',
                    permissions: [12, 13],
                    permissionNames: ['角色管理', '权限管理'],
                    description: '为角色分配权限的按钮权限',
                    sort: 2,
                    status: 0,
                    createTime: '2024-01-15 10:35:00',
                    updateTime: '2024-01-15 10:35:00'
                },
                {
                    id: 7,
                    buttonName: '导出用户',
                    buttonCode: 'user:export',
                    buttonIcon: 'layui-icon-export',
                    permissions: [11],
                    permissionNames: ['用户管理'],
                    description: '导出用户数据的按钮权限',
                    sort: 5,
                    status: 1,
                    createTime: '2024-01-15 10:36:00',
                    updateTime: '2024-01-15 10:36:00'
                },
                {
                    id: 8,
                    buttonName: '重置密码',
                    buttonCode: 'user:reset:password',
                    buttonIcon: 'layui-icon-key',
                    permissions: [11],
                    permissionNames: ['用户管理'],
                    description: '重置用户密码的按钮权限',
                    sort: 6,
                    status: 1,
                    createTime: '2024-01-15 10:37:00',
                    updateTime: '2024-01-15 10:37:00'
                }
            ];
            
            var currentData = buttonData;
            var currentPage = 1;
            var pageSize = 10;
            
            // 初始化
            init();
            
            function init() {
                updateStats();
                renderTable();
                bindEvents();
            }
            
            // 更新统计数据
            function updateStats() {
                var total = buttonData.length;
                var enabled = buttonData.filter(item => item.status === 1).length;
                var disabled = buttonData.filter(item => item.status === 0).length;
                var assigned = buttonData.filter(item => item.permissions && item.permissions.length > 0).length;
                
                document.getElementById('totalButtons').textContent = total;
                document.getElementById('enabledButtons').textContent = enabled;
                document.getElementById('disabledButtons').textContent = disabled;
                document.getElementById('assignedButtons').textContent = assigned;
            }
            
            // 渲染表格
            function renderTable() {
                var tbody = document.getElementById('buttonTableBody');
                var emptyState = document.getElementById('emptyState');
                
                if (currentData.length === 0) {
                    tbody.innerHTML = '';
                    emptyState.style.display = 'block';
                    return;
                }
                
                emptyState.style.display = 'none';
                
                var html = '';
                var start = (currentPage - 1) * pageSize;
                var end = Math.min(start + pageSize, currentData.length);
                
                for (var i = start; i < end; i++) {
                    var item = currentData[i];
                    html += '<tr>';
                    html += '<td><input type="checkbox" name="buttonIds" value="' + item.id + '" lay-skin="primary"></td>';
                    html += '<td>' + item.id + '</td>';
                    html += '<td>' + item.buttonName + '</td>';
                    html += '<td><code>' + item.buttonCode + '</code></td>';
                    html += '<td><i class="layui-icon ' + item.buttonIcon + '"></i></td>';
                    
                    // 权限标签
                    html += '<td><div class="permission-tags">';
                    if (item.permissionNames && item.permissionNames.length > 0) {
                        item.permissionNames.forEach(function(name) {
                            html += '<span class="permission-tag">' + name + '</span>';
                        });
                    } else {
                        html += '<span style="color: #999;">未分配</span>';
                    }
                    html += '</div></td>';
                    
                    html += '<td>' + (item.description || '-') + '</td>';
                    html += '<td>' + item.sort + '</td>';
                    
                    // 状态
                    if (item.status === 1) {
                        html += '<td><span class="status-badge status-normal">正常</span></td>';
                    } else {
                        html += '<td><span class="status-badge status-disabled">禁用</span></td>';
                    }
                    
                    html += '<td>' + item.createTime + '</td>';
                    
                    // 操作按钮
                    html += '<td><div class="btn-group">';
                    html += '<button class="layui-btn layui-btn-xs btn-primary" onclick="editButton(' + item.id + ')">';
                    html += '<i class="layui-icon layui-icon-edit"></i> 编辑</button>';
                    html += '<button class="layui-btn layui-btn-xs btn-info" onclick="assignPermissions(' + item.id + ')">';
                    html += '<i class="layui-icon layui-icon-vercode"></i> 分配权限</button>';
                    
                    if (item.status === 1) {
                        html += '<button class="layui-btn layui-btn-xs btn-warning" onclick="toggleStatus(' + item.id + ', 0)">';
                        html += '<i class="layui-icon layui-icon-pause"></i> 禁用</button>';
                    } else {
                        html += '<button class="layui-btn layui-btn-xs btn-success" onclick="toggleStatus(' + item.id + ', 1)">';
                        html += '<i class="layui-icon layui-icon-play"></i> 启用</button>';
                    }
                    
                    html += '<button class="layui-btn layui-btn-xs btn-danger" onclick="deleteButton(' + item.id + ')">';
                    html += '<i class="layui-icon layui-icon-delete"></i> 删除</button>';
                    html += '</div></td>';
                    html += '</tr>';
                }
                
                tbody.innerHTML = html;
                form.render('checkbox');
                
                // 渲染分页
                renderPagination();
            }
            
            // 渲染分页
            function renderPagination() {
                laypage.render({
                    elem: 'pagination',
                    count: currentData.length,
                    limit: pageSize,
                    curr: currentPage,
                    layout: ['count', 'prev', 'page', 'next', 'limit', 'skip'],
                    jump: function(obj, first) {
                        currentPage = obj.curr;
                        pageSize = obj.limit;
                        if (!first) {
                            renderTable();
                        }
                    }
                });
            }
            
            // 绑定事件
            function bindEvents() {
                // 搜索
                form.on('submit(search)', function(data) {
                    var formData = data.field;
                    currentData = buttonData.filter(function(item) {
                        var match = true;
                        
                        if (formData.buttonName && !item.buttonName.includes(formData.buttonName)) {
                            match = false;
                        }
                        
                        if (formData.buttonCode && !item.buttonCode.includes(formData.buttonCode)) {
                            match = false;
                        }
                        
                        if (formData.status && item.status != formData.status) {
                            match = false;
                        }
                        
                        if (formData.permissionId && (!item.permissions || !item.permissions.includes(parseInt(formData.permissionId)))) {
                            match = false;
                        }
                        
                        return match;
                    });
                    
                    currentPage = 1;
                    renderTable();
                    return false;
                });
                
                // 添加按钮
                document.getElementById('addButton').addEventListener('click', function() {
                    addButton();
                });
                
                // 批量删除
                document.getElementById('batchDeleteButton').addEventListener('click', function() {
                    batchDelete();
                });
                
                // 导出
                document.getElementById('exportButton').addEventListener('click', function() {
                    exportButtons();
                });
                
                // 刷新
                document.getElementById('refreshButton').addEventListener('click', function() {
                    currentData = buttonData;
                    currentPage = 1;
                    updateStats();
                    renderTable();
                    layer.msg('数据已刷新', {icon: 1});
                });
            }
            
            // 添加按钮
            function addButton() {
                layer.open({
                    type: 2,
                    title: '添加按钮权限',
                    shadeClose: true,
                    shade: 0.3,
                    maxmin: true,
                    area: ['800px', '600px'],
                    content: 'button-form.html',
                    btn: ['确定', '取消'],
                    yes: function(index, layero) {
                        var iframeWindow = window[layero.find('iframe')[0]['name']];
                        iframeWindow.submitForm(function(formData) {
                            console.log('新增按钮权限：', formData);
                            
                            // 模拟添加
                            var newButton = {
                                id: buttonData.length + 1,
                                buttonName: formData.buttonName,
                                buttonCode: formData.buttonCode,
                                buttonIcon: formData.buttonIcon || 'layui-icon-component',
                                permissions: formData.permissions || [],
                                permissionNames: formData.permissionNames || [],
                                description: formData.description,
                                sort: formData.sort,
                                status: formData.status,
                                createTime: new Date().toLocaleString(),
                                updateTime: new Date().toLocaleString()
                            };
                            
                            buttonData.unshift(newButton);
                            currentData = buttonData;
                            updateStats();
                            renderTable();
                            
                            layer.close(index);
                            layer.msg('添加成功', {icon: 1});
                        });
                    }
                });
            }
            
            // 编辑按钮
            window.editButton = function(id) {
                layer.open({
                    type: 2,
                    title: '编辑按钮权限',
                    shadeClose: true,
                    shade: 0.3,
                    maxmin: true,
                    area: ['800px', '600px'],
                    content: 'button-form.html?id=' + id,
                    btn: ['确定', '取消'],
                    yes: function(index, layero) {
                        var iframeWindow = window[layero.find('iframe')[0]['name']];
                        iframeWindow.submitForm(function(formData) {
                            console.log('编辑按钮权限：', formData);
                            
                            // 模拟更新
                            var buttonIndex = buttonData.findIndex(item => item.id == id);
                            if (buttonIndex !== -1) {
                                buttonData[buttonIndex] = {
                                    ...buttonData[buttonIndex],
                                    buttonName: formData.buttonName,
                                    buttonCode: formData.buttonCode,
                                    buttonIcon: formData.buttonIcon,
                                    permissions: formData.permissions,
                                    permissionNames: formData.permissionNames,
                                    description: formData.description,
                                    sort: formData.sort,
                                    status: formData.status,
                                    updateTime: new Date().toLocaleString()
                                };
                                
                                currentData = buttonData;
                                updateStats();
                                renderTable();
                            }
                            
                            layer.close(index);
                            layer.msg('编辑成功', {icon: 1});
                        });
                    }
                });
            };
            
            // 分配权限
            window.assignPermissions = function(id) {
                var button = buttonData.find(item => item.id == id);
                if (!button) return;
                
                layer.open({
                    type: 1,
                    title: '分配权限 - ' + button.buttonName,
                    shadeClose: true,
                    shade: 0.3,
                    area: ['500px', '400px'],
                    content: '<div style="padding: 20px;">' +
                             '<div style="margin-bottom: 15px;">为按钮 <strong>' + button.buttonName + '</strong> 分配权限：</div>' +
                             '<div class="layui-form">' +
                             '<input type="checkbox" name="permissions" value="11" title="用户管理" lay-skin="primary">' +
                             '<input type="checkbox" name="permissions" value="12" title="角色管理" lay-skin="primary">' +
                             '<input type="checkbox" name="permissions" value="13" title="权限管理" lay-skin="primary">' +
                             '<input type="checkbox" name="permissions" value="14" title="部门管理" lay-skin="primary">' +
                             '</div>' +
                             '</div>',
                    btn: ['确定', '取消'],
                    success: function(layero) {
                        // 设置已选中的权限
                        if (button.permissions) {
                            button.permissions.forEach(function(permId) {
                                var checkbox = layero.find('input[value="' + permId + '"]');
                                if (checkbox.length > 0) {
                                    checkbox[0].checked = true;
                                }
                            });
                        }
                        form.render('checkbox');
                    },
                    yes: function(index, layero) {
                        var selectedPermissions = [];
                        var selectedNames = [];
                        
                        layero.find('input[name="permissions"]:checked').each(function() {
                            selectedPermissions.push(parseInt(this.value));
                            selectedNames.push(this.title);
                        });
                        
                        console.log('分配权限：', selectedPermissions);
                        
                        // 更新按钮权限
                        var buttonIndex = buttonData.findIndex(item => item.id == id);
                        if (buttonIndex !== -1) {
                            buttonData[buttonIndex].permissions = selectedPermissions;
                            buttonData[buttonIndex].permissionNames = selectedNames;
                            buttonData[buttonIndex].updateTime = new Date().toLocaleString();
                            
                            currentData = buttonData;
                            updateStats();
                            renderTable();
                        }
                        
                        layer.close(index);
                        layer.msg('权限分配成功', {icon: 1});
                    }
                });
            };
            
            // 切换状态
            window.toggleStatus = function(id, status) {
                var button = buttonData.find(item => item.id == id);
                if (!button) return;
                
                var statusText = status === 1 ? '启用' : '禁用';
                
                layer.confirm('确定要' + statusText + '按钮权限 "' + button.buttonName + '" 吗？', {
                    icon: 3,
                    title: '确认操作'
                }, function(index) {
                    console.log(statusText + '按钮权限：', id);
                    
                    // 更新状态
                    var buttonIndex = buttonData.findIndex(item => item.id == id);
                    if (buttonIndex !== -1) {
                        buttonData[buttonIndex].status = status;
                        buttonData[buttonIndex].updateTime = new Date().toLocaleString();
                        
                        currentData = buttonData;
                        updateStats();
                        renderTable();
                    }
                    
                    layer.close(index);
                    layer.msg(statusText + '成功', {icon: 1});
                });
            };
            
            // 删除按钮
            window.deleteButton = function(id) {
                var button = buttonData.find(item => item.id == id);
                if (!button) return;
                
                layer.confirm('确定要删除按钮权限 "' + button.buttonName + '" 吗？<br><span style="color: red;">删除后不可恢复！</span>', {
                    icon: 3,
                    title: '确认删除'
                }, function(index) {
                    console.log('删除按钮权限：', id);
                    
                    // 删除按钮
                    buttonData = buttonData.filter(item => item.id != id);
                    currentData = buttonData;
                    updateStats();
                    renderTable();
                    
                    layer.close(index);
                    layer.msg('删除成功', {icon: 1});
                });
            };
            
            // 批量删除
            function batchDelete() {
                var checkedBoxes = document.querySelectorAll('input[name="buttonIds"]:checked');
                if (checkedBoxes.length === 0) {
                    layer.msg('请选择要删除的按钮权限', {icon: 2});
                    return;
                }
                
                var ids = Array.from(checkedBoxes).map(cb => parseInt(cb.value));
                
                layer.confirm('确定要删除选中的 ' + ids.length + ' 个按钮权限吗？<br><span style="color: red;">删除后不可恢复！</span>', {
                    icon: 3,
                    title: '确认批量删除'
                }, function(index) {
                    console.log('批量删除按钮权限：', ids);
                    
                    // 批量删除
                    buttonData = buttonData.filter(item => !ids.includes(item.id));
                    currentData = buttonData;
                    updateStats();
                    renderTable();
                    
                    layer.close(index);
                    layer.msg('批量删除成功', {icon: 1});
                });
            }
            
            // 导出
            function exportButtons() {
                layer.msg('导出功能开发中...', {icon: 2});
            }
        });
    </script>
</body>
</html>