# TSM分布式微服务后台管理系统项目实施计划

## 1. 项目概述

TSM（分布式微服务后台管理系统）是一个基于Spring Boot微服务架构的企业级后台管理平台，主要实现用户管理和权限管理功能，采用RBAC权限模型，支持按钮级别的细粒度权限控制。

## 2. 技术栈

### 2.1 后端技术栈

* **框架**：Spring Boot 2.7+, Spring Cloud 2021+

* **数据访问**：MyBatis 3.5+, MyBatis-Plus

* **数据库**：MySQL 8.0

* **缓存**：Redis 6.0

* **服务注册发现**：Nacos

* **API网关**：Spring Cloud Gateway

* **构建工具**：Maven 3.8+

* **安全框架**：Spring Security + JWT

### 2.2 前端技术栈

* **UI框架**：Layui

* **脚本语言**：JavaScript, jQuery

* **样式**：CSS3, 灰白色系主题

* **模板引擎**：Thymeleaf

## 3. 项目结构设计

### 3.1 微服务模块划分

```
TSM/
├── tsm-gateway/           # API网关服务
├── tsm-auth/             # 认证服务
├── tsm-user/             # 用户管理服务
├── tsm-permission/       # 权限管理服务
├── tsm-common/           # 公共模块
└── tsm-web/              # 前端静态资源
```

### 3.2 单个微服务内部结构

```
tsm-user/
├── src/main/java/com/tsm/user/
│   ├── controller/       # 控制器层
│   ├── service/         # 服务层
│   │   └── impl/        # 服务实现
│   ├── dao/             # 数据访问层
│   ├── entity/          # 实体类
│   ├── dto/             # 数据传输对象
│   ├── vo/              # 视图对象
│   ├── config/          # 配置类
│   ├── util/            # 工具类
│   └── UserApplication.java
├── src/main/resources/
│   ├── mapper/          # MyBatis映射文件
│   ├── application.yml  # 配置文件
│   └── bootstrap.yml    # 启动配置
└── pom.xml
```

## 4. 开发计划

### 4.1 第一阶段：基础架构搭建（1-2天）

**任务清单：**

1. 创建Maven父项目和子模块
2. 配置Nacos服务注册中心
3. 搭建API网关服务
4. 配置MySQL数据库连接
5. 配置Redis缓存
6. 创建公共模块（common）

**交付物：**

* 完整的项目骨架

* 基础配置文件

* 服务注册发现功能

### 4.2 第二阶段：认证服务开发（2-3天）

**任务清单：**

1. 实现JWT认证机制
2. 开发登录接口
3. 实现权限验证拦截器
4. 开发验证码功能
5. 实现登录日志记录

**交付物：**

* 认证服务完整功能

* 登录页面

* JWT token生成和验证

### 4.3 第三阶段：用户管理服务开发（3-4天）

**任务清单：**

1. 设计用户相关数据表
2. 开发用户CRUD接口
3. 实现用户状态管理
4. 开发用户列表页面
5. 实现用户新增/编辑页面
6. 添加数据验证和异常处理

**交付物：**

* 用户管理完整功能

* 用户管理前端页面

* 用户数据表和初始数据

### 4.4 第四阶段：权限管理服务开发（4-5天）

**任务清单：**

1. 设计RBAC权限模型数据表
2. 开发角色管理接口
3. 开发权限管理接口
4. 实现按钮级权限控制
5. 开发权限分配页面
6. 实现权限树形结构展示

**交付物：**

* 权限管理完整功能

* 角色和权限管理页面

* RBAC数据表和初始数据

### 4.5 第五阶段：前端界面完善（2-3天）

**任务清单：**

1. 实现灰白色系主题
2. 开发通用头部、导航、尾部组件
3. 实现面包屑导航
4. 优化页面响应式布局
5. 添加数据统计图表

**交付物：**

* 完整的前端界面

* 统一的UI风格

* 响应式布局

### 4.6 第六阶段：测试和优化（2-3天）

**任务清单：**

1. 编写单元测试
2. 进行集成测试
3. 性能优化
4. 安全测试
5. 用户体验优化

**交付物：**

* 测试报告

* 性能优化报告

* 部署文档

## 5. 测试计划

### 5.1 单元测试

* **覆盖范围**：所有Service层和Dao层方法

* **测试框架**：JUnit 5 + Mockito

* **覆盖率要求**：≥80%

### 5.2 集成测试

* **API接口测试**：使用Postman或自动化测试脚本

* **数据库集成测试**：验证数据操作的正确性

* **微服务间通信测试**：验证服务间调用

### 5.3 功能测试用例

**用户管理测试用例：**

1. 用户登录功能测试

   * 正确用户名密码登录成功

   * 错误用户名密码登录失败

   * 验证码验证功能

   * 账户锁定功能

2. 用户CRUD操作测试

   * 新增用户功能

   * 编辑用户信息

   * 删除用户功能

   * 用户状态启用/禁用

   * 用户列表查询和分页

**权限管理测试用例：**

1. 角色管理测试

   * 角色创建、编辑、删除

   * 角色状态管理

   * 角色权限分配

2. 权限控制测试

   * 菜单权限验证

   * 按钮权限验证

   * 权限继承测试

   * 权限缓存测试

### 5.4 性能测试

* **并发用户数**：100-500用户

* **响应时间要求**：页面加载<2秒，API响应<500ms

* **数据库连接池**：测试连接池配置优化

## 6. 部署方案

### 6.1 开发环境部署

1. 本地安装MySQL、Redis、Nacos
2. 配置开发环境数据库
3. 启动各微服务
4. 访问前端页面进行测试

### 6.2 生产环境部署

1. 使用Docker容器化部署
2. 配置Nginx负载均衡
3. 配置生产环境数据库
4. 配置监控和日志收集

### 6.3 数据库配置

```yaml
# 生产环境数据库配置
spring:
  datasource:
    url: jdbc:mysql://47.109.155.118:3309/TSM?useUnicode=true&characterEncoding=utf8&serverTimezone=GMT%2B8
    username: root
    password: Root@@__135230
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 60000
      idle-timeout: 600000
      max-lifetime: 1800000
```

## 7. 风险控制

### 7.1 技术风险

* **微服务复杂性**：采用逐步拆分策略，先单体后微服务

* **数据一致性**：使用分布式事务或最终一致性方案

* **性能问题**：提前进行性能测试和优化

### 7.2 进度风险

* **需求变更**：建立需求变更控制流程

* **技术难点**：提前进行技术预研

* **人员配置**：确保关键技能人员到位

## 8. 质量保证

### 8.1 代码质量

* 统一代码规范和格式化配置

* 强制代码审查流程

* 使用SonarQube进行代码质量检查

### 8.2 文档质量

* API文档使用Swagger自动生成

* 数据库设计文档

* 部署和运维文档

* 用户操作手册

## 9. 项目交付

### 9.1 交付清单

1. 完整的源代码
2. 数据库脚本和初始数据
3. 部署文档和配置文件
4. 测试报告和用例
5. 用户操作手册
6. 系统架构文档

### 9.2 验收标准

1. 所有功能模块正常运行
2. 性能指标达到要求
3. 安全测试通过
4. 用户体验良好
5. 文档完整准确

## 10. 后续维护

### 10.1 运维监控

* 系统性能监控

* 错误日志监控

* 数据库性能监控

* 用户行为分析

### 10.2 版本迭代

* 建立版本发布流程

* 功能需求收集和评估

* 定期安全更新

* 性能优化迭代

